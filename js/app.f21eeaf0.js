(function(){"use strict";var e={9710:function(e,t,n){var o=n(1020),a=n(9242),i=n(3396),r=n(4870),s=n(7139);const l=(0,i._)("span",{class:"logo__span"},"m",-1),c=(0,i.Uk)(" box ");function u(e,t){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.j4)(n,{to:"/",class:"logo"},{default:(0,i.w5)((()=>[l,c])),_:1})}var h=n(89);const f={},d=(0,h.Z)(f,[["render",u]]);var m=d,p=n(2238);const v={class:"header__list"},g=(0,i.Uk)("Home"),_=(0,i.Uk)("Movies"),b=(0,i._)("option",{value:"rotate",selected:""},"rotate",-1),w=(0,i._)("option",{value:"deep"},"deep",-1),y=(0,i._)("option",{value:"opacity"},"opacity",-1),k=[b,w,y],M={class:"header__list header__list-nth2"},D=(0,i._)("span",{class:"icon-reg"},"",-1),S=(0,i._)("li",null,[(0,i._)("a",{href:"#!",class:"header__icon icon-reg"}," ")],-1),C=(0,i._)("li",null,[(0,i._)("a",{href:"#!",class:"header__icon icon-reg"},"")],-1),P=(0,i._)("span",{class:"bars"},null,-1),O=[P];var $=(0,i.aZ)({__name:"HeaderNav",setup(e){const t=(0,p.h)(),n=(0,r.iH)(t.$state.anime);return(0,i.m0)((()=>{t.anime=n.value})),(e,o)=>{const l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",{class:(0,s.C_)(["header__items",{active:(0,r.SU)(t).showMobileMenu}])},[(0,i._)("ul",v,[(0,i._)("li",null,[(0,i.Wm)(l,{to:"/",class:"header__link main__close"},{default:(0,i.w5)((()=>[g])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(l,{to:"/movies",class:"header__link movies__link"},{default:(0,i.w5)((()=>[_])),_:1})]),(0,i._)("li",null,[(0,i.wy)((0,i._)("select",{class:"header__link movies__link header__select","onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e)},k,512),[[a.bM,n.value]])])]),(0,i._)("ul",M,[(0,i._)("li",null,[(0,i.Wm)(l,{to:"/movies",class:"header__icon search__link"},{default:(0,i.w5)((()=>[D])),_:1})]),S,C])],2),(0,i._)("a",{href:"#!",class:(0,s.C_)(["header__btn",{active:(0,r.SU)(t).showMobileMenu}]),onClick:o[1]||(o[1]=(0,a.iM)(((...e)=>(0,r.SU)(t).setMobileMenu&&(0,r.SU)(t).setMobileMenu(...e)),["prevent"]))},O,2)],64)}}});const j=$;var Z=j;const E={class:"header"},T={class:"navigate"},U={class:"container"},F={class:"header__nav"};var L=(0,i.aZ)({__name:"Header",setup(e){const t=(0,p.h)();return(e,n)=>((0,i.wg)(),(0,i.iD)("header",E,[(0,i._)("div",T,[(0,i._)("div",U,[(0,i._)("nav",F,[(0,i.Wm)(m),(0,i.Wm)(Z)])])]),(0,i._)("div",{class:(0,s.C_)(["header__abs",{active:(0,r.SU)(t).showMobileMenu}]),onClick:n[0]||(n[0]=(...e)=>(0,r.SU)(t).setMobileMenu&&(0,r.SU)(t).setMobileMenu(...e))},null,2)]))}});const A=L;var H=A;const N=(0,o.Q_)("footer",{state:()=>({footerData:{socialLinks:[{icon:"",url:"http://facebook.com"},{icon:"",url:"http://twitter.com"},{icon:"",url:"http://linkedin.com"},{icon:"",url:"http://instagram.com"}],privacyLinks:[{name:"Voice over and Subtitle",url:"#!"},{name:"Media Center",url:"#!"},{name:"Privacy",url:"#!"},{name:"Contact us",url:"#!"}],infoLinks:[{name:"Help Center",url:"#!"},{name:"Job Opportunities",url:"#!"},{name:"Cookies Preferences",url:"#!"}]}})}),W={class:"footer"},x={class:"container"},Y={class:"footer__content"},B={class:"footer__logo"},I={class:"footer__social"},K=["href"],q={class:"icon-brand"},z={class:"footer__lists"},R={class:"footer__list"},Q=["href"],V={class:"footer__list"},J=["href"];var X=(0,i.aZ)({__name:"Footer",setup(e){const t=N();return(e,n)=>((0,i.wg)(),(0,i.iD)("footer",W,[(0,i._)("div",x,[(0,i._)("div",Y,[(0,i._)("div",B,[(0,i.Wm)(m),(0,i._)("div",I,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,r.SU)(t).footerData.socialLinks,(e=>((0,i.wg)(),(0,i.iD)("a",{href:e.url,class:"footer__social-link",key:e.url,target:"_blank"},[(0,i._)("span",q,(0,s.zw)(e.icon),1)],8,K)))),128))])]),(0,i._)("div",z,[(0,i._)("ul",R,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,r.SU)(t).footerData.privacyLinks,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.name},[(0,i._)("a",{href:e.url,class:"footer__link"},(0,s.zw)(e.name),9,Q)])))),128))]),(0,i._)("ul",V,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,r.SU)(t).footerData.infoLinks,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.name},[(0,i._)("a",{href:e.url,class:"footer__link"},(0,s.zw)(e.name),9,J)])))),128))])])])])]))}});const G=X;var ee=G;const te={class:"anime"},ne=(0,i._)("div",{class:"circle"},null,-1),oe=[ne];function ae(e,t){return(0,i.wg)(),(0,i.iD)("div",te,oe)}const ie={},re=(0,h.Z)(ie,[["render",ae]]);var se=re;const le={class:"main"};var ce=(0,i.aZ)({__name:"App",setup(e){const t=(0,p.h)();return t.setMainData(),(e,n)=>{const o=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,r.SU)(t).$state.loading?((0,i.wg)(),(0,i.j4)(se,{key:0})):(0,i.kq)("",!0),(0,i.Wm)(H),(0,i._)("main",le,[(0,i.Wm)(o,null,{default:(0,i.w5)((({Component:e})=>[(0,i.Wm)(a.uT,{name:(0,r.SU)(t).$state.anime,mode:"out-in"},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(e)))])),_:2},1032,["name"])])),_:1})]),(0,i.Wm)(ee)],64)}}});const ue=ce;var he=ue,fe=n(5431);(0,fe.z)("/vue3-ts-pinia-router-movies-app/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var de=n(2483);const me=()=>n.e(232).then(n.bind(n,2232)),pe=()=>n.e(971).then(n.bind(n,971)),ve=()=>n.e(402).then(n.bind(n,5402)),ge=()=>n.e(24).then(n.bind(n,1024)),_e=[{path:"/",name:"home",component:me},{path:"/movies",name:"movies",component:ve},{path:"/movies/:id",name:"moviessingle",component:pe},{path:"/:pathMatch(.*)*",name:"errorpage",component:ge}],be=(0,de.p7)({history:(0,de.PO)(),routes:_e});var we=be;(0,a.ri)(he).use((0,o.WB)()).use(we).mount("#app")},2238:function(e,t,n){n.d(t,{h:function(){return h}});var o=n(1020),a=n(2482);n(1703);const i="https://kinopoiskapiunofficial.tech",r="X-API-KEY",s="bc44c90c-0245-4354-aa9c-a6ce5d0a5edd";class l{constructor(){(0,a.Z)(this,"date",void 0),(0,a.Z)(this,"months",void 0),(0,a.Z)(this,"curYear",void 0),(0,a.Z)(this,"curMonth",void 0),(0,a.Z)(this,"fOPen",(async e=>{const t=await fetch(e,{headers:{[r]:s}});if(t.ok)return t.json();throw new Error(`Cannot access to ${e}`)})),(0,a.Z)(this,"getTopMovies",((e=1)=>this.fOPen(`${i}/api/v2.2/films/top?type=TOP_250_BEST_FILMS&page=${e}`))),(0,a.Z)(this,"getSoloFilm",(e=>this.fOPen(`${i}/api/v2.2/films/${e}`))),(0,a.Z)(this,"getReleases",((e=1,t=this.curYear,n=this.curMonth)=>this.fOPen(`${i}/api/v2.1/films/releases?year=${t}&month=${n}&page=${e}`))),(0,a.Z)(this,"getFrames",(e=>this.fOPen(`${i}/api/v2.2/films/${e}/images?type=STILL&page=1`))),(0,a.Z)(this,"getFacts",(e=>this.fOPen(`${i}/api/v2.2/films/${e}/facts`))),(0,a.Z)(this,"getReviews",(e=>this.fOPen(`${i}/api/v2.2/films/${e}/reviews?page=1&order=DATE_DESC`))),(0,a.Z)(this,"getSearch",((e=1,t)=>this.fOPen(`${i}/api/v2.1/films/search-by-keyword?keyword=${t}&page=${e}`))),this.date=(new Date).getMonth(),this.months=["january","february","march","april","may","june","july","august","september","october","november","december"],this.curYear=(new Date).getFullYear(),this.curMonth=this.months[this.date]}}const c=new l,u=(e,t)=>Math.floor(Math.random()*(t+1-e)+e),h=(0,o.Q_)("main",{state:()=>({showMobileMenu:!1,searchData:null,mainData:{top:null,awaited:null},headerData:null,singleMovie:null,reviews:null,facts:null,frames:null,page:1,maxPages:10,loading:!0,error:"",search:"",type:"top",anime:"rotate"}),actions:{setMobileMenu(){this.showMobileMenu=!this.showMobileMenu},setMainData(){(async function(){const e=u(1,13),[t,n]=await Promise.all([c.getTopMovies(e),c.getReleases()]);return{top:t,releases:n,rand:e}})().then((async e=>{this.mainData.top=e.top,this.mainData.awaited=e.releases,this.searchData=e.top;const t=u(0,this.mainData.top.films.length-1),n=await c.getSoloFilm(this.mainData.top.films[t].filmId);this.headerData=n,this.loading=!1,this.page=e.rand,this.maxPages=this.mainData.top.pagesCount,this.error=""})).catch((e=>{console.log(e),this.loading=!1,this.error="Возникла Ошибка при загрузке данных"}))},setCurPage(){this.page<this.maxPages&&this.page++},setSingleMovie(e){this.loading=!0,async function(){const[t,n,o,a]=await Promise.all([c.getReviews(e),c.getFrames(e),c.getFacts(e),c.getSoloFilm(e)]);return{reviews:t,frames:n,facts:o,solo:a}}().then((e=>{this.singleMovie=e.solo,this.reviews=e.reviews;const t=e.facts.items.slice(0,20);this.facts={...e.facts,items:t},this.frames=e.frames,this.singleMovie.countries=this.singleMovie.countries.reduce(((e,t)=>e+`${t.country} `),""),this.singleMovie.genres=this.singleMovie.genres.reduce(((e,t)=>e+`${t.genre} `),""),this.loading=!1})).catch((e=>{console.log(e),this.error="Возникла ошибка при получении данных",this.loading=!1}))},setSearhData(e){this.loading=!0,c["top"===this.type?"getTopMovies":"getSearch"](this.page,this.search).then((t=>{this.loading=!1,this.search="",console.log(t),"new"===e.type?(console.log("new"),this.searchData=t,this.maxPages=t.pagesCount,this.page=1):"add"===e.type&&(console.log("add"),this.searchData?.films&&(this.searchData.films=[...this.searchData.films,...t.films]))})).catch((e=>{console.log(e),this.error="Возможно возникла ошибка",this.loading=!1}))}}})}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,i){if(!o){var r=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],i=e[u][2];for(var s=!0,l=0;l<o.length;l++)(!1&i||r>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(s=!1,i<r&&(r=i));if(s){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[o,a,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{1:"cdb153fe",24:"3dd89584",79:"7fbfd87d",232:"0523c8dd",304:"3f08fb50",375:"280cc0b6",402:"183705bb",639:"78632364",672:"e5531e3d",704:"b7559bc6",795:"e9963af4",873:"3c8e3eaf",971:"6ee5566f"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{24:"f611d265",232:"40063fe0",304:"60dabaab",402:"f53ee93a",795:"6ebf97d6",873:"561d29d2",971:"561d29d2"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="movies-app:";n.l=function(o,a,i,r){if(e[o])e[o].push(a);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==o||h.getAttribute("data-webpack")==t+i){s=h;break}}s||(l=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=o),e[o]=[a];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var a=e[o];if(delete e[o],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/vue3-ts-pinia-router-movies-app/"}(),function(){var e=function(e,t,n,o){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var i=function(i){if(a.onerror=a.onload=null,"load"===i.type)n();else{var r=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=s,a.parentNode.removeChild(a),o(l)}};return a.onerror=a.onload=i,a.href=t,document.head.appendChild(a),a},t=function(e,t){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var a=n[o],i=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===e||i===t))return a}var r=document.getElementsByTagName("style");for(o=0;o<r.length;o++){a=r[o],i=a.getAttribute("data-href");if(i===e||i===t)return a}},o=function(o){return new Promise((function(a,i){var r=n.miniCssF(o),s=n.p+r;if(t(r,s))return a();e(o,s,a,i)}))},a={143:0};n.f.miniCss=function(e,t){var n={24:1,232:1,304:1,402:1,795:1,873:1,971:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=o(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))}}(),function(){var e={143:0};n.f.j=function(t,o){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)o.push(a[2]);else{var i=new Promise((function(n,o){a=e[t]=[n,o]}));o.push(a[2]=i);var r=n.p+n.u(t),s=new Error,l=function(o){if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var i=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",s.name="ChunkLoadError",s.type=i,s.request=r,a[1](s)}};n.l(r,l,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,i,r=o[0],s=o[1],l=o[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)var u=l(n)}for(t&&t(o);c<r.length;c++)i=r[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},o=self["webpackChunkmovies_app"]=self["webpackChunkmovies_app"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(9710)}));o=n.O(o)})();
//# sourceMappingURL=app.f21eeaf0.js.map